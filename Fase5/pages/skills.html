<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <title>Habilidades e Interesses</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
  <link rel="stylesheet" href="../styles/global.css">
</head>

<body>
  <main class="container my-5">
    <img src="../assets/skills.png" alt="Skills" class="logo mb-4">
      <p class="lead">Valorizamos e incentivamos a criativade de todos os nossos profissionais - e esse espaço é seu. Queremos conhecer melhor suas habilidades, seus interesses e projetos pessoais.</p>
      <br><br>
    </div>

    <div class="card mb-4">
      <div class="card-header"><i class="bi bi-code-slash"></i> Habilidades Técnicas</div>
      <div class="card-body">
        <p>Crie categorias para organizar suas habilidades (ex: Frontend, Backend) ou para listar tecnologias que você pretende estudar.</p>
        <div id="add-list-form" class="row g-2 mt-2 align-items-end p-3 bg-light border rounded mb-4">
          <div class="col-md-9">
            <label for="newListName" class="form-label"><b>Nome da Nova Categoria de Habilidades</b></label>
            <input type="text" id="newListName" class="form-control" placeholder="Ex: Linguagens de Programação, Ferramentas DevOps...">
          </div>
          <div class="col-md-3 d-grid">
            <button id="addListBtn" type="button" class="btn btn-primary">Criar Categoria</button>
          </div>
        </div>
        <div id="skill-lists-container"></div>
      </div>
    </div>

    <div class="card mb-4">
      <div class="card-header"><i class="bi bi-person-heart"></i> Soft Skills</div>
      <div class="card-body">
        <p>Adicione suas principais habilidades comportamentais e uma breve descrição de como você as aplica.</p>
        <div class="table-responsive">
          <table class="table" id="softSkillsTable">
            <thead>
              <tr>
                <th>Habilidade</th>
                <th>Descrição</th>
                <th style="width: 15%;">Ações</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
        <form id="softSkillsForm" class="row g-2 mt-2 align-items-end p-3 bg-light border rounded">
          <div class="col-md-4"><label for="softSkillNome" class="form-label">Nome da Habilidade</label><input type="text" id="softSkillNome" class="form-control" placeholder="Ex: Organização"></div>
          <div class="col-md-6"><label for="softSkillDesc" class="form-label">Descrição</label><input type="text" id="softSkillDesc" class="form-control" placeholder="Ex: Capaz de gerenciar tarefas e prioridades de forma eficiente."></div>
          <div class="col-md-2 d-grid"><button type="submit" class="btn btn-primary">Adicionar</button></div>
        </form>
      </div>
    </div>

    <div class="row g-4">
      <div class="col-lg-6">
        <div class="card mb-4">
          <div class="card-header"><i class="bi bi-translate"></i> Idiomas</div>
          <div class="card-body">
            <label for="idiomasSelect" class="form-label">Selecione os idiomas que você domina:</label>
            <select class="form-select" multiple id="idiomasSelect">
              <option>Português</option>
              <option>Inglês</option>
              <option>Espanhol</option>
              <option>Alemão</option>
            </select>
            <small class="form-text text-muted">Segure Ctrl (ou Cmd) para selecionar mais de um.</small>
          </div>
        </div>
      </div>
      <div class="col-lg-6">
        <div class="card mb-4">
          <div class="card-header"><i class="bi bi-joystick"></i> Hobbies</div>
          <div class="card-body">
            <label for="hobbiesTextarea" class="form-label">Conte-nos sobre seus hobbies e interesses:</label>
            <textarea class="form-control" id="hobbiesTextarea" rows="4" placeholder="O que você gosta de fazer no seu tempo livre?"></textarea>
          </div>
        </div>
      </div>
    </div>

    <div class="card mb-4">
      <div class="card-header"><i class="bi bi-journal-check"></i> Projetos Pessoais</div>
      <div class="card-body">
        <div class="table-responsive">
          <table class="table" id="todoTable">
            <thead>
              <tr>
                <th>Projeto</th>
                <th>Descrição</th>
                <th style="width: 20%;">Progresso</th>
                <th style="width: 15%;">Ações</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
        <form id="todoForm" class="row g-2 mt-2 align-items-end p-3 bg-light border rounded">
          <div class="col-md-3"><label for="projNome" class="form-label">Nome</label><input type="text" id="projNome" class="form-control"></div>
          <div class="col-md-4"><label for="projDesc" class="form-label">Descrição</label><input type="text" id="projDesc" class="form-control"></div>
          <div class="col-md-3"><label for="projPerc" class="form-label">Progresso (%)</label><input type="number" id="projPerc" class="form-control" min="0" max="100"></div>
          <div class="col-md-2 d-grid"><button type="submit" class="btn btn-primary">Adicionar</button></div>
        </form>
      </div>
    </div>

    <div class="text-end">
      <a href="index.html" class="btn btn-primary">Finalizar Cadastro</a>
    </div>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const addListBtn = document.getElementById('addListBtn');
      const newListNameInput = document.getElementById('newListName');
      const skillListsContainer = document.getElementById('skill-lists-container');

      const createSkillList = (listName) => {
        const listCard = document.createElement('div');
        listCard.className = 'card mb-3';

        listCard.innerHTML = `
            <div class="card-header d-flex justify-content-between align-items-center">
                <h5 class="mb-0 list-title">${listName}</h5>
                <div><button type="button" class="btn btn-sm btn-danger delete-list"><i class="bi bi-trash-fill"></i></button></div>
            </div>
            <div class="card-body">
                <ul class="list-group"></ul>
                <form class="add-skill-form row g-2 mt-3 align-items-end p-3 bg-light border rounded">
                    <div class="col-md-5"><label class="form-label">Habilidade</label><input type="text" class="form-control form-control-sm" name="skillName" placeholder="Ex: JavaScript"></div>
                    <div class="col-md-5">
                        <label class="form-label">Nível</label>
                        <select class="form-select form-select-sm" name="skillLevel">
                            <option>Iniciante</option>
                            <option>Intermediário</option>
                            <option>Avançado</option>
                        </select>
                    </div>
                    <div class="col-md-2 d-grid"><button type="submit" class="btn btn-primary btn-sm">Adicionar</button></div>
                </form>
            </div>`;
        
        listCard.querySelector('.delete-list').addEventListener('click', () => listCard.remove());
        
        listCard.querySelector('.add-skill-form').addEventListener('submit', (e) => {
          e.preventDefault();
          const form = e.target;
          const skillNameInput = form.querySelector('input[name="skillName"]');
          const skillLevelSelect = form.querySelector('select[name="skillLevel"]');
          if (!skillNameInput.value.trim()) return;

          const skillItem = document.createElement('li');
          skillItem.className = 'list-group-item d-flex justify-content-between align-items-center';
          skillItem.innerHTML = `
              <div><span class="fw-bold">${skillNameInput.value}</span>: <span class="badge text-bg-primary">${skillLevelSelect.value}</span></div>
              <div>
                <button type="button" class="btn btn-sm btn-warning me-1 edit-skill"><i class="bi bi-pencil-fill"></i></button>
                <button type="button" class="btn btn-sm btn-danger delete-skill"><i class="bi bi-trash-fill"></i></button>
              </div>`;

          skillItem.querySelector('.delete-skill').addEventListener('click', () => skillItem.remove());
          skillItem.querySelector('.edit-skill').addEventListener('click', () => {
              skillNameInput.value = skillItem.querySelector('.fw-bold').textContent;
              skillLevelSelect.value = skillItem.querySelector('.badge').textContent;
              skillItem.remove();
          });

          listCard.querySelector('.list-group').appendChild(skillItem);
          form.reset();
        });
        skillListsContainer.appendChild(listCard);
      };

      addListBtn.addEventListener('click', () => {
        const listName = newListNameInput.value.trim();
        if (listName) {
          createSkillList(listName);
          newListNameInput.value = '';
        }
      });
    });
  </script>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const setupDynamicTable = (formId, tableId, columnConfigs) => {
        const form = document.getElementById(formId);
        const tableBody = document.querySelector(`#${tableId} tbody`);

        form.addEventListener('submit', e => {
          e.preventDefault();
          const inputs = columnConfigs.map(config => document.getElementById(config.inputId));
          if (inputs.some(input => !input.value)) return;

          const row = document.createElement('tr');
          let cellsHTML = '';

          inputs.forEach((input, index) => {
            const config = columnConfigs[index];
            if (config.isProgressBar) {
              cellsHTML += `
                <td data-label="Progresso">
                  <div class="progress" role="progressbar" aria-valuenow="${input.value}" aria-valuemin="0" aria-valuemax="100">
                    <div class="progress-bar" style="width:${input.value}%">${input.value}%</div>
                  </div>
                </td>`;
            } else {
              cellsHTML += `<td>${input.value}</td>`;
            }
          });

          row.innerHTML = cellsHTML + `
            <td>
              <button type="button" class="btn btn-sm btn-warning me-1 editar"><i class="bi bi-pencil-fill"></i></button>
              <button type="button" class="btn btn-sm btn-danger excluir"><i class="bi bi-trash-fill"></i></button>
            </td>`;

          row.querySelector('.excluir').addEventListener('click', () => row.remove());
          row.querySelector('.editar').addEventListener('click', () => {
            inputs.forEach((input, index) => {
              const cellContent = row.cells[index].textContent.trim().replace('%', '');
              input.value = cellContent;
            });
            row.remove();
          });

          tableBody.appendChild(row);
          form.reset();
        });
      };

      setupDynamicTable('todoForm', 'todoTable', [
        { inputId: 'projNome' },
        { inputId: 'projDesc' },
        { inputId: 'projPerc', isProgressBar: true }
      ]);

      setupDynamicTable('softSkillsForm', 'softSkillsTable', [
        { inputId: 'softSkillNome' },
        { inputId: 'softSkillDesc' }
      ]);
    });
  </script>

</body>
</html>